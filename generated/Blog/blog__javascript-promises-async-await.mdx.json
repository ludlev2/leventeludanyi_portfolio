{
  "title": "JavaScript Promise and Async/Await",
  "date": "2022-04-20T00:00:00.000Z",
  "tags": [
    "JavaScript",
    "ReactJs",
    "Snippets",
    "Promises",
    "Async/Await"
  ],
  "draft": false,
  "summary": "A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell.",
  "author": "Dale Larroder",
  "body": {
    "raw": "\n## Overview\n\n<TOCInline toc={props.toc} exclude=\"Overview\" toHeading={2} />\n\n## What is a Promise?\n\nThe Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value.\n\nA **Promise** is in one of these states:\n\n- <em>pending</em>: initial state, neither fulfilled nor rejected.\n- <em>fulfilled</em>: meaning that the operation was completed successfully.\n- <em>rejected</em>: meaning that the operation failed.\n\n## Visualization of a Promise\n\n![image](/static/blog/promises.webp)\n\n## What is Async/Await?\n\nAsync/Await was the result of `callback hell` and nested promises from the `old era` of JavaScript\n\n## Visualization of callback hell\n\n```js\nconst doSomeFetch = fetch('/some-api')\n\ndoSomeFetch()\n  .then((data) => doAnotherFetch(data))\n  .then((result) => doAnoterFetch(result))\n  .then((outcome) => probablyLastFetch(outcome))\n```\n\nBut in the real world, it would look some something like this:\n\n```js\ndoSomeFetch().then((data) => {\n  doAnotherFetch(data)\n    .then((result) => {\n      doAnoterFetch(data, result)\n        .then((outcome) => {\n          probablyLastFetch(data, result, outcome)\n            .then((fin) => {\n              // Ah Finally!\n            })\n            .catch((e) => {\n              handleError(e)\n            })\n        })\n        .catch((e) => {\n          handleError(e)\n        })\n    })\n    .catch((e) => {\n      handleError(e)\n    })\n})\n```\n\n## Async/Await allows us to write code like this:\n\n```js\nconst data = await doSomeFetch()\nconst result = await doAnotherFetch(data)\nconst outcome = await doAnoterFetch(data, result)\nconst fin = await probablyLastFetch(data, result, outcome)\n```\n\nLooks cool right? But how about error handling?\nIt would look like this:\n\n```js\nlet data, result, outcome, fin\n\ntry {\n  data = await doSomeFetch()\n} catch (e) {\n  handleError(e)\n}\n\ntry {\n  result = await doAnotherFetch(data)\n} catch (e) {\n  handleError(e)\n}\n\ntry {\n  outcome = await doAnoterFetch(data, result)\n} catch (e) {\n  handleError(e)\n}\n\ntry {\n  fin = await probablyLastFetch(data, result, outcome)\n} catch (e) {\n  handleError(e)\n}\n```\n\nYou can also use a single `try catch` for all of the promises if you don't care about catching the individual errors of each promises.\n\nThis looks better:\n\n```js\ntry {\n  const data = await doSomeFetch()\n  const result = await doAnotherFetch(data)\n  const outcome = await doAnoterFetch(data, result)\n  const fin = await probablyLastFetch(data, result, outcome)\n} catch (e) {\n  handleError(e)\n}\n```\n\nBut it you want able to catch and identify which block threw an error and handle each case differently, we append a catch block to each async method, kind of similar to the promises way:\n\n```js\nconst data = await doSomeFetch().catch(handleError)\nconst result = await doAnotherFetch(data).catch(handleError)\nconst outcome = await doAnoterFetch(data, result).catch(handleError)\nconst fin = await probablyLastFetch(data, result, outcome).catch(handleError)\n```\n\n## A Clean Approach\n\nBuilding up on our previous examples, let's create a better error handler:\n\n```js\nexport async function fancyFetch(fetcher, ...args) {\n  try {\n    const data = await fetcher(...args)\n    return [data, null]\n  } catch (error) {\n    log(error)\n    return [null, error]\n  }\n}\n```\n\nIf we have data, we return an array with data as the first parameter and error as null, if we get and error, we return data as null and the error object.\n\nNow to re-write up the async/await example using an array destructring syntax:\n\n```js\nconst [data, dataError] = await fancyFetch(doSomeFetch);\nif(dataError) { // got the error context, do something! }\n\nconst [result, resultError] = await fancyFetch(doAnotherFetch, data);\nif(resultError) { // got the error context, do something! }\n\nconst [outcome, outcomeError] = await fancyFetch(doAnotherFetch, data, result);\nif(outcomeError) { // got the error context, do something! }\n\nconst [fin, finError] = await fancyFetch(probablyLastFetch, data, result, outcome);\nif(finError) { // got the error context, do something! }\n```\n\n## Conclusion\n\n- If you don't care about handling errors for individual async calls, go with a single `try/catch`.\n- If you care about handling errors for individual async calls, but do not care about the things inside the context of the catch block, use `await doSomeFetch().catch(handleError)`;\n- If the answer for both of the above points were 'No', then the `fancyFetch()` approach should work for you.\n",
    "code": "var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),w=(e,n)=>{for(var s in n)t(e,s,{get:n[s],enumerable:!0})},o=(e,n,s,l)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of u(n))!N.call(e,c)&&c!==s&&t(e,c,{get:()=>n[c],enumerable:!(l=h(n,c))||l.enumerable});return e};var f=(e,n,s)=>(s=e!=null?p(m(e)):{},o(n||!e||!e.__esModule?t(s,\"default\",{value:e,enumerable:!0}):s,e)),y=e=>o(t({},\"__esModule\",{value:!0}),e);var r=k((v,i)=>{i.exports=_jsx_runtime});var A={};w(A,{default:()=>F,frontmatter:()=>g});var a=f(r()),g={title:\"JavaScript Promise and Async/Await\",date:\"2022-04-20\",tags:[\"JavaScript\",\"ReactJs\",\"Snippets\",\"Promises\",\"Async/Await\"],draft:!1,author:\"Dale Larroder\",summary:\"A short visual guide on what a Promise is in JavaScript, and how to avoid call back hell.\"};function d(e){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",strong:\"strong\",ul:\"ul\",li:\"li\",img:\"img\",code:\"code\",pre:\"pre\"},e.components),{TOCInline:s}=n;return s||x(\"TOCInline\",!0,\"12:1-12:63\"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h2,{id:\"overview\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#overview\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Overview\"]}),`\n`,(0,a.jsx)(s,{toc:e.toc,exclude:\"Overview\",toHeading:2}),`\n`,(0,a.jsxs)(n.h2,{id:\"what-is-a-promise\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#what-is-a-promise\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"What is a Promise?\"]}),`\n`,(0,a.jsx)(n.p,{children:\"The Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value.\"}),`\n`,(0,a.jsxs)(n.p,{children:[\"A \",(0,a.jsx)(n.strong,{children:\"Promise\"}),\" is in one of these states:\"]}),`\n`,(0,a.jsxs)(n.ul,{children:[`\n`,(0,a.jsxs)(n.li,{children:[(0,a.jsx)(\"em\",{children:\"pending\"}),\": initial state, neither fulfilled nor rejected.\"]}),`\n`,(0,a.jsxs)(n.li,{children:[(0,a.jsx)(\"em\",{children:\"fulfilled\"}),\": meaning that the operation was completed successfully.\"]}),`\n`,(0,a.jsxs)(n.li,{children:[(0,a.jsx)(\"em\",{children:\"rejected\"}),\": meaning that the operation failed.\"]}),`\n`]}),`\n`,(0,a.jsxs)(n.h2,{id:\"visualization-of-a-promise\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#visualization-of-a-promise\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Visualization of a Promise\"]}),`\n`,(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:\"/static/blog/promises.webp\",alt:\"image\"})}),`\n`,(0,a.jsxs)(n.h2,{id:\"what-is-asyncawait\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#what-is-asyncawait\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"What is Async/Await?\"]}),`\n`,(0,a.jsxs)(n.p,{children:[\"Async/Await was the result of \",(0,a.jsx)(n.code,{children:\"callback hell\"}),\" and nested promises from the \",(0,a.jsx)(n.code,{children:\"old era\"}),\" of JavaScript\"]}),`\n`,(0,a.jsxs)(n.h2,{id:\"visualization-of-callback-hell\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#visualization-of-callback-hell\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Visualization of callback hell\"]}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" doSomeFetch \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token string\",children:\"'/some-api'\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"data\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"result\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"outcome\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:\"But in the real world, it would look some something like this:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"data\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"result\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"outcome\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"fin\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// Ah Finally!\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.h2,{id:\"asyncawait-allows-us-to-write-code-like-this\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#asyncawait-allows-us-to-write-code-like-this\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Async/Await allows us to write code like this:\"]}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:`Looks cool right? But how about error handling?\nIt would look like this:`}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),` fin\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.p,{children:[\"You can also use a single \",(0,a.jsx)(n.code,{children:\"try catch\"}),\" for all of the promises if you don't care about catching the individual errors of each promises.\"]}),`\n`,(0,a.jsx)(n.p,{children:\"This looks better:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token function\",children:\"handleError\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:\"But it you want able to catch and identify which block threw an error and handle each case differently, we append a catch block to each async method, kind of similar to the promises way:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doSomeFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnotherFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" outcome \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"doAnoterFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" fin \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"probablyLastFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"handleError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.h2,{id:\"a-clean-approach\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#a-clean-approach\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"A Clean Approach\"]}),`\n`,(0,a.jsx)(n.p,{children:\"Building up on our previous examples, let's create a better error handler:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsxs)(n.span,{className:\"token parameter\",children:[\"fetcher\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,a.jsx)(n.span,{className:\"token spread operator\",children:\"...\"}),\"args\"]}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" data \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fetcher\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,a.jsx)(n.span,{className:\"token spread operator\",children:\"...\"}),\"args\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword null nil\",children:\"null\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token function\",children:\"log\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"error\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,a.jsx)(n.span,{className:\"token keyword null nil\",children:\"null\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" error\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,a.jsx)(n.p,{children:\"If we have data, we return an array with data as the first parameter and error as null, if we get and error, we return data as null and the error object.\"}),`\n`,(0,a.jsx)(n.p,{children:\"Now to re-write up the async/await example using an array destructring syntax:\"}),`\n`,(0,a.jsx)(n.pre,{className:\"language-js\",children:(0,a.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" dataError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"doSomeFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"dataError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" resultError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"doAnotherFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"resultError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcomeError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"doAnotherFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"outcomeError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]}),(0,a.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"fin\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" finError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,a.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,a.jsx)(n.span,{className:\"token function\",children:\"fancyFetch\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"probablyLastFetch\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" data\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" outcome\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,a.jsxs)(n.span,{className:\"code-line\",children:[(0,a.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"finError\",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,a.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,a.jsx)(n.span,{className:\"token comment\",children:\"// got the error context, do something! }\"}),`\n`]})]})}),`\n`,(0,a.jsxs)(n.h2,{id:\"conclusion\",children:[(0,a.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,a.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,a.jsxs)(n.ul,{children:[`\n`,(0,a.jsxs)(n.li,{children:[\"If you don't care about handling errors for individual async calls, go with a single \",(0,a.jsx)(n.code,{children:\"try/catch\"}),\".\"]}),`\n`,(0,a.jsxs)(n.li,{children:[\"If you care about handling errors for individual async calls, but do not care about the things inside the context of the catch block, use \",(0,a.jsx)(n.code,{children:\"await doSomeFetch().catch(handleError)\"}),\";\"]}),`\n`,(0,a.jsxs)(n.li,{children:[\"If the answer for both of the above points were 'No', then the \",(0,a.jsx)(n.code,{children:\"fancyFetch()\"}),\" approach should work for you.\"]}),`\n`]})]})}function b(e={}){let{wrapper:n}=e.components||{};return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(d,e)})):d(e)}var F=b;function x(e,n,s){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `/Users/ludanyilevente/dalelarroder/_mdx_bundler_entry_point-10f7cc68-4c10-4b1d-a3ff-db82e845d336.mdx`\":\"\"))}return y(A);})();\n;return Component;"
  },
  "_id": "blog/javascript-promises-async-await.mdx",
  "_raw": {
    "sourceFilePath": "blog/javascript-promises-async-await.mdx",
    "sourceFileName": "javascript-promises-async-await.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/javascript-promises-async-await"
  },
  "type": "Blog",
  "readingTime": {
    "text": "4 min read",
    "minutes": 3.075,
    "time": 184500,
    "words": 615
  },
  "slug": "javascript-promises-async-await",
  "toc": [
    {
      "value": "Overview",
      "url": "#overview",
      "depth": 2
    },
    {
      "value": "What is a Promise?",
      "url": "#what-is-a-promise",
      "depth": 2
    },
    {
      "value": "Visualization of a Promise",
      "url": "#visualization-of-a-promise",
      "depth": 2
    },
    {
      "value": "What is Async/Await?",
      "url": "#what-is-asyncawait",
      "depth": 2
    },
    {
      "value": "Visualization of callback hell",
      "url": "#visualization-of-callback-hell",
      "depth": 2
    },
    {
      "value": "Async/Await allows us to write code like this:",
      "url": "#asyncawait-allows-us-to-write-code-like-this",
      "depth": 2
    },
    {
      "value": "A Clean Approach",
      "url": "#a-clean-approach",
      "depth": 2
    },
    {
      "value": "Conclusion",
      "url": "#conclusion",
      "depth": 2
    }
  ]
}