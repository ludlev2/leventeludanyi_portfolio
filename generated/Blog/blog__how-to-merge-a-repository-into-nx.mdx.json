{
  "title": "How to merge a git repository into Nx",
  "date": "2022-05-18T00:00:00.000Z",
  "tags": [
    "Git",
    "Monorepo",
    "Nx",
    "Workspaces"
  ],
  "draft": false,
  "summary": "A guide on how to merge any existing app or library into a Nx monorepo.",
  "author": "Dale Larroder",
  "body": {
    "raw": "\n## Overview\n\n<TOCInline toc={props.toc} exclude=\"Overview\" toHeading={2} />\n\n## What is Nx?\n\n[Nx](https://nx.dev/) is a framework that allows you to architect,\ntest, and build your project at any scale with the most popular modern\nFront-end frameworks like [React](https://reactjs.org/) and [Angular](https://angular.io/),\nand Back-end ones like [NestJs](https://nestjs.com/) or [Express](https://expressjs.com/).\nTo make this possible, Nx comes shipped with a large toolset that simplifies your Monorepo\nmanagement. If you are unfamiliar with [Monorepo](https://semaphoreci.com/blog/what-is-monorepo#:~:text=A%20monorepo%20is%20a%20version,Monorepos%20can%20reach%20colossal%20sizes.),\nit is basically a version-controlled code repository that holds many projects and libraries.\n\n## Prerequisites\n\n- Git\n- Node\n- Nx CLI\n\n## Creating an Nx Workspace\n\n```\nnpx create-nx-workspace@latest\n```\n\n![image](/static/blog/nx/create-nx-workspace.webp)\n\n## Nx Workspace Folder structure\n\n```\nnx-workspace/\n├── apps/\n├── libs/\n├── tools/\n├── workspace.json\n├── nx.json\n├── package.json\n└── tsconfig.base.json\n```\n\nYou can read more about Nx's folder structure [here](https://nx.dev/getting-started/nx-setup#folder-structure)\n\n## Step 1: Clone source repository\n\n```\ngit clone <repo-url> packageC\n```\n\nIt is recommended to create a new copy of the repository you are about to clone into the nx monorepo, as there\nwill be some git changes that are easier to delete than to start over.\n\n## Step 2: Move all files into the right sub directory.\n\nIf you are trying to move an app, the sub directory should be `apps/packageC`\n\n```\nexport TARGET_DIR=\"apps/packageC\"\n```\n\nIf you are trying to move a library, the sub directory should be `libs/packageC`\n\n```\nexport TARGET_DIR=\"libs/packageC\"\n```\n\nThe next commands will actually move the files and will rewrite all of the git\nhistory into the the TARGET_DIR you have specified above.\n\n```\ncd packageC\n```\n\n```\ngit filter-branch --prune-empty --tree-filter '\n  mkdir -p \"$TARGET_DIR\"\n  git ls-tree --name-only $GIT_COMMIT | xargs -I files mv files \"$TARGET_DIR\"\n'\n```\n\n## Step 3: Add remote in your monorepo to packageC\n\nThis will print the working directory of the current package you are trying to clone.\n\n```\ncd packageC && pwd\n```\n\nThe next step is adding the newly acquired remote to your nx workspace for you to be able to fetch.\n\n```\ncd nx-workspace\n```\n\n```\ngit remote add packageC <packageC-pwd>\n```\n\n## Step 4: Merge packageC into monorepo\n\n```\ngit fetch packageC --no-tags\n```\n\n```\ngit merge packageC/master --allow-unrelated-histories\n```\n\n## Step 5: Clean up\n\n```\ngit remote remove packageC\n```\n\nAfter successfully merging, its time to cleanup duplicate config files, `package.json`, `eslintrc.js` and etc.\n\n## Other tips\n\n#### Environment variables\n\nIf you are using env variables in your application, don't forget to change the naming of your env variables\nto have a prefix of NX\\_, you can read more about Nx environment variables [here](https://nx.dev/guides/environment-variables)\n\nFor Example when you merged in a react app to nx:\n\n```diff\n-REACT_APP_AUTH_HOST=http://localhost:3002\n+NX_AUTH_HOST=http://localhost:3002\n```\n\n#### Fixing absolute imports from your Create React App\n\nIf you are importing a CRA, One of the errors you'll be getting is `@nrwl/nx/enforce-module-boundaries` error.\n\nTo fix this, you will need to update all your absolute paths to the path you specified in `tsconfig.base.json`\n\n```:tsconfig.base.json\n    \"paths\": {\n      \"@design-system\": [\"libs/design/src/index.ts\"],\n      },\n```\n\nand fix all the files that use absolute paths\n\n```diff\n-import Modal from 'src/components/Modal/Modal';\n+import Modal from '@design-system/src/components/Modal/Modal';\n```\n\n#### Fixing Error: global is not defined\n\nIf you have merged an existing create react app into nx, you might have encountered this error: `global is not defined`\n\nThe simple fix for this is to override Nx's webpack config and add the following:\n\n```js:webpack.config.js\nconst nrwlConfig = require('@nrwl/react/plugins/webpack.js');\n\nmodule.exports = (config, context) => {\n  nrwlConfig(config);\n\n  return {\n    ...config,\n    node: {\n      global: true,\n    },\n  };\n};\n```\n\nand don't forget to call it in your apps `project.json` file\n\n```diff:project.json\n-\"webpackConfig\": \"@nrwl/react/plugins/webpack\"\n+\"webpackConfig\": \"./apps/field-app/webpack.config.js\"\n```\n",
    "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var i in e)c(a,i,{get:e[i],enumerable:!0})},l=(a,e,i,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!u.call(a,s)&&s!==i&&c(a,s,{get:()=>e[s],enumerable:!(r=p(e,s))||r.enumerable});return a};var k=(a,e,i)=>(i=a!=null?h(g(a)):{},l(e||!a||!a.__esModule?c(i,\"default\",{value:a,enumerable:!0}):i,a)),x=a=>l(c({},\"__esModule\",{value:!0}),a);var t=N((C,o)=>{o.exports=_jsx_runtime});var I={};f(I,{default:()=>w,frontmatter:()=>b});var n=k(t()),b={title:\"How to merge a git repository into Nx\",date:\"2022-05-18\",tags:[\"Git\",\"Monorepo\",\"Nx\",\"Workspaces\"],draft:!1,author:\"Dale Larroder\",summary:\"A guide on how to merge any existing app or library into a Nx monorepo.\"};function d(a){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\",img:\"img\",h4:\"h4\",div:\"div\"},a.components),{TOCInline:i}=e;return i||v(\"TOCInline\",!0,\"12:1-12:63\"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"overview\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#overview\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Overview\"]}),`\n`,(0,n.jsx)(i,{toc:a.toc,exclude:\"Overview\",toHeading:2}),`\n`,(0,n.jsxs)(e.h2,{id:\"what-is-nx\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#what-is-nx\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"What is Nx?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nx.dev/\",children:\"Nx\"}),` is a framework that allows you to architect,\ntest, and build your project at any scale with the most popular modern\nFront-end frameworks like `,(0,n.jsx)(e.a,{href:\"https://reactjs.org/\",children:\"React\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://angular.io/\",children:\"Angular\"}),`,\nand Back-end ones like `,(0,n.jsx)(e.a,{href:\"https://nestjs.com/\",children:\"NestJs\"}),\" or \",(0,n.jsx)(e.a,{href:\"https://expressjs.com/\",children:\"Express\"}),`.\nTo make this possible, Nx comes shipped with a large toolset that simplifies your Monorepo\nmanagement. If you are unfamiliar with `,(0,n.jsx)(e.a,{href:\"https://semaphoreci.com/blog/what-is-monorepo#:~:text=A%20monorepo%20is%20a%20version,Monorepos%20can%20reach%20colossal%20sizes.\",children:\"Monorepo\"}),`,\nit is basically a version-controlled code repository that holds many projects and libraries.`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"prerequisites\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#prerequisites\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Prerequisites\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Git\"}),`\n`,(0,n.jsx)(e.li,{children:\"Node\"}),`\n`,(0,n.jsx)(e.li,{children:\"Nx CLI\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"creating-an-nx-workspace\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#creating-an-nx-workspace\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating an Nx Workspace\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`npx create-nx-workspace@latest\n`})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/static/blog/nx/create-nx-workspace.webp\",alt:\"image\"})}),`\n`,(0,n.jsxs)(e.h2,{id:\"nx-workspace-folder-structure\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#nx-workspace-folder-structure\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Nx Workspace Folder structure\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`nx-workspace/\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 apps/\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 libs/\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 tools/\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 workspace.json\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 nx.json\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 package.json\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 tsconfig.base.json\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can read more about Nx's folder structure \",(0,n.jsx)(e.a,{href:\"https://nx.dev/getting-started/nx-setup#folder-structure\",children:\"here\"})]}),`\n`,(0,n.jsxs)(e.h2,{id:\"step-1-clone-source-repository\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step-1-clone-source-repository\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Step 1: Clone source repository\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`git clone <repo-url> packageC\n`})})}),`\n`,(0,n.jsx)(e.p,{children:`It is recommended to create a new copy of the repository you are about to clone into the nx monorepo, as there\nwill be some git changes that are easier to delete than to start over.`}),`\n`,(0,n.jsxs)(e.h2,{id:\"step-2-move-all-files-into-the-right-sub-directory\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step-2-move-all-files-into-the-right-sub-directory\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Step 2: Move all files into the right sub directory.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you are trying to move an app, the sub directory should be \",(0,n.jsx)(e.code,{children:\"apps/packageC\"})]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`export TARGET_DIR=\"apps/packageC\"\n`})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you are trying to move a library, the sub directory should be \",(0,n.jsx)(e.code,{children:\"libs/packageC\"})]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`export TARGET_DIR=\"libs/packageC\"\n`})})}),`\n`,(0,n.jsx)(e.p,{children:`The next commands will actually move the files and will rewrite all of the git\nhistory into the the TARGET_DIR you have specified above.`}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`cd packageC\n`})})}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`git filter-branch --prune-empty --tree-filter '\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  mkdir -p \"$TARGET_DIR\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  git ls-tree --name-only $GIT_COMMIT | xargs -I files mv files \"$TARGET_DIR\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`'\n`})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"step-3-add-remote-in-your-monorepo-to-packagec\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step-3-add-remote-in-your-monorepo-to-packagec\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Step 3: Add remote in your monorepo to packageC\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This will print the working directory of the current package you are trying to clone.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`cd packageC && pwd\n`})})}),`\n`,(0,n.jsx)(e.p,{children:\"The next step is adding the newly acquired remote to your nx workspace for you to be able to fetch.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`cd nx-workspace\n`})})}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`git remote add packageC <packageC-pwd>\n`})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"step-4-merge-packagec-into-monorepo\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step-4-merge-packagec-into-monorepo\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Step 4: Merge packageC into monorepo\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`git fetch packageC --no-tags\n`})})}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`git merge packageC/master --allow-unrelated-histories\n`})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"step-5-clean-up\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step-5-clean-up\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Step 5: Clean up\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`git remote remove packageC\n`})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"After successfully merging, its time to cleanup duplicate config files, \",(0,n.jsx)(e.code,{children:\"package.json\"}),\", \",(0,n.jsx)(e.code,{children:\"eslintrc.js\"}),\" and etc.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"other-tips\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#other-tips\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Other tips\"]}),`\n`,(0,n.jsxs)(e.h4,{id:\"environment-variables\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#environment-variables\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Environment variables\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`If you are using env variables in your application, don't forget to change the naming of your env variables\nto have a prefix of NX_, you can read more about Nx environment variables `,(0,n.jsx)(e.a,{href:\"https://nx.dev/guides/environment-variables\",children:\"here\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"For Example when you merged in a react app to nx:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"language-diff code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line deleted\",children:(0,n.jsxs)(e.span,{className:\"token deleted-sign deleted\",children:[(0,n.jsx)(e.span,{className:\"token prefix deleted\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`REACT_APP_AUTH_HOST=http://localhost:3002\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token deleted-sign deleted\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted-sign inserted\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`NX_AUTH_HOST=http://localhost:3002\n`})]})]})]})}),`\n`,(0,n.jsxs)(e.h4,{id:\"fixing-absolute-imports-from-your-create-react-app\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#fixing-absolute-imports-from-your-create-react-app\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Fixing absolute imports from your Create React App\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you are importing a CRA, One of the errors you'll be getting is \",(0,n.jsx)(e.code,{children:\"@nrwl/nx/enforce-module-boundaries\"}),\" error.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"To fix this, you will need to update all your absolute paths to the path you specified in \",(0,n.jsx)(e.code,{children:\"tsconfig.base.json\"})]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-title\",children:\"tsconfig.base.json\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`    \"paths\": {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      \"@design-system\": [\"libs/design/src/index.ts\"],\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      },\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"and fix all the files that use absolute paths\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"language-diff code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line deleted\",children:(0,n.jsxs)(e.span,{className:\"token deleted-sign deleted\",children:[(0,n.jsx)(e.span,{className:\"token prefix deleted\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`import Modal from 'src/components/Modal/Modal';\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token deleted-sign deleted\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted-sign inserted\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`import Modal from '@design-system/src/components/Modal/Modal';\n`})]})]})]})}),`\n`,(0,n.jsxs)(e.h4,{id:\"fixing-error-global-is-not-defined\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#fixing-error-global-is-not-defined\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Fixing Error: global is not defined\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you have merged an existing create react app into nx, you might have encountered this error: \",(0,n.jsx)(e.code,{children:\"global is not defined\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"The simple fix for this is to override Nx's webpack config and add the following:\"}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-title\",children:\"webpack.config.js\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" nrwlConfig \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'@nrwl/react/plugins/webpack.js'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"module\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method-variable function-variable method function property-access\",children:\"exports\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"config\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" context\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"nrwlConfig\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"config\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"config\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"global\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"and don't forget to call it in your apps \",(0,n.jsx)(e.code,{children:\"project.json\"}),\" file\"]}),`\n`,(0,n.jsx)(e.div,{className:\"remark-code-title\",children:\"project.json\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"language-diff code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line deleted\",children:(0,n.jsxs)(e.span,{className:\"token deleted-sign deleted\",children:[(0,n.jsx)(e.span,{className:\"token prefix deleted\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`\"webpackConfig\": \"@nrwl/react/plugins/webpack\"\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token deleted-sign deleted\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted-sign inserted\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`\"webpackConfig\": \"./apps/field-app/webpack.config.js\"\n`})]})]})]})})]})}function y(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var w=y;function v(a,e,i){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(i?\"\\nIt\\u2019s referenced in your code at `\"+i+\"` in `/Users/ludanyilevente/dalelarroder/_mdx_bundler_entry_point-7a1c6054-b4a3-46ea-8aed-9a8be4a3265e.mdx`\":\"\"))}return x(I);})();\n;return Component;"
  },
  "_id": "blog/how-to-merge-a-repository-into-nx.mdx",
  "_raw": {
    "sourceFilePath": "blog/how-to-merge-a-repository-into-nx.mdx",
    "sourceFileName": "how-to-merge-a-repository-into-nx.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/how-to-merge-a-repository-into-nx"
  },
  "type": "Blog",
  "readingTime": {
    "text": "3 min read",
    "minutes": 2.95,
    "time": 177000,
    "words": 590
  },
  "slug": "how-to-merge-a-repository-into-nx",
  "toc": [
    {
      "value": "Overview",
      "url": "#overview",
      "depth": 2
    },
    {
      "value": "What is Nx?",
      "url": "#what-is-nx",
      "depth": 2
    },
    {
      "value": "Prerequisites",
      "url": "#prerequisites",
      "depth": 2
    },
    {
      "value": "Creating an Nx Workspace",
      "url": "#creating-an-nx-workspace",
      "depth": 2
    },
    {
      "value": "Nx Workspace Folder structure",
      "url": "#nx-workspace-folder-structure",
      "depth": 2
    },
    {
      "value": "Step 1: Clone source repository",
      "url": "#step-1-clone-source-repository",
      "depth": 2
    },
    {
      "value": "Step 2: Move all files into the right sub directory.",
      "url": "#step-2-move-all-files-into-the-right-sub-directory",
      "depth": 2
    },
    {
      "value": "Step 3: Add remote in your monorepo to packageC",
      "url": "#step-3-add-remote-in-your-monorepo-to-packagec",
      "depth": 2
    },
    {
      "value": "Step 4: Merge packageC into monorepo",
      "url": "#step-4-merge-packagec-into-monorepo",
      "depth": 2
    },
    {
      "value": "Step 5: Clean up",
      "url": "#step-5-clean-up",
      "depth": 2
    },
    {
      "value": "Other tips",
      "url": "#other-tips",
      "depth": 2
    },
    {
      "value": "Environment variables",
      "url": "#environment-variables",
      "depth": 4
    },
    {
      "value": "Fixing absolute imports from your Create React App",
      "url": "#fixing-absolute-imports-from-your-create-react-app",
      "depth": 4
    },
    {
      "value": "Fixing Error: global is not defined",
      "url": "#fixing-error-global-is-not-defined",
      "depth": 4
    }
  ]
}